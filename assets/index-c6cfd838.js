import{r as e,a as w,j as $,c as D}from"./index-e0a0e62b.js";import{c as E}from"./config-component-props-c0788442.js";import{u as O}from"./use-controlled-state-c80e6a10.js";import{u as L}from"./use-merged-prop-78f8d6c6.js";import{u as T}from"./use-merged-prop-ref-3afcd252.js";import{n as A}from"./misc-276e45ca.js";import{u as F}from"./use-checkbox-render-adccb62c.js";const j=e.createContext({}),J="fnx-checkbox",K=w(J),Q=E({defaultChecked:!1,skipGroup:!1,iconShape:"square"}),y=e.forwardRef((b,v)=>{const[{defaultChecked:R,skipGroup:V,iconShape:G},{checked:k,value:n,onChange:P,...d}]=Q(b),p=e.useContext(j),h=T(p),s=V?void 0:p.value||void 0,C=s==null,S=e.useMemo(()=>s==null?k:n!=null?s.includes(n):k,[k,n,s]),{value:o,onChangeRef:m}=O({value:S,defaultValue:s!=null?!1:R,onChange:P}),x=e.useRef(null),a=e.useRef(null),l=L(!1,d.disabled,p.disabled);e.useEffect(()=>{if(C||n==null)return;const{cancelValue:t=A,registerValue:_=A}=h.current;return n!==a.current&&(a.current!=null&&t(a.current),_(n),a.current=n),()=>{a.current=null,t(n)}},[n,h,C]);const u=e.useCallback(()=>{if(l)return;const{toggleValue:t}=h.current;!C&&t&&n!=null?t(!o,n):m.current(!o)},[l,h,C,n,o,m]),c=e.useMemo(()=>({element:x.current,toggle:u}),[u]);return e.useImperativeHandle(v,()=>c,[c]),F({role:"checkbox",...d,iconShape:G,onClick:t=>{u(),d.onClick&&d.onClick(t)}},p)({bem:K,checked:o,ref:x})});y.displayName="Checkbox";const U=y,W="fnx-checkbox-group",X=w(W),Y=E({defaultValue:[]}),H=e.forwardRef((b,v)=>{const[{defaultValue:R},{value:V,onChange:G,disabled:k,direction:n,iconSize:P,iconPosition:d,iconShape:p,iconCheckedColor:h,labelDisabled:s,icon:C,checkedIcon:S,maxCheckedCount:o,className:m,children:x,...a}]=Y(b),{value:l,onChangeRef:u}=O({value:V,defaultValue:R,onChange:G}),c=e.useRef([]),I=e.useCallback(r=>{c.current=c.current.filter(i=>i!==r)},[]),t=e.useCallback(r=>{c.current.push(r)},[]),_=e.useCallback((r,i)=>{const f=[...l],g=f.indexOf(i);if(r&&o&&f.length>=o)return;r&&g===-1&&(o==null||f.length<o)&&f.push(i),r||f.splice(g,1);const z=f.filter(B=>c.current.indexOf(B)!==-1);u.current(z)},[o,u,l]),M=e.useRef(null),N=e.useMemo(()=>({element:M.current,toggleAll:r=>{let i=[...c.current];r&&r.checkAll||(i=[...c.current].filter(g=>l.indexOf(g)===-1)),u.current(i)}}),[u,l]);return e.useImperativeHandle(v,()=>N,[N]),$("div",{className:D(X({...n!=null?{[n]:n!=="vertical"}:{}}),m),...a,ref:M,children:$(j.Provider,{value:{value:l,disabled:k,direction:n,iconSize:P,iconPosition:d,iconShape:p,iconCheckedColor:h,labelDisabled:s,icon:C,checkedIcon:S,registerValue:t,cancelValue:I,toggleValue:_},children:x})})});H.displayName="CheckboxGroup";const Z=H,ee=Z,q=U;q.Group=ee;const se=q;export{se as C};
