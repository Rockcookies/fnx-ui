import{r as i,j as t,c as q,a as F}from"./index-8b435b75.js";import{u as _}from"./use-demo-translate-489d42ac.js";import{C as N}from"./index-fdc7973b.js";import{u as p}from"./use-safe-state-d07d3d84.js";import{P as G}from"./index-7c3b8342.js";import{T as j}from"./index-5a32ce02.js";import{n as J,s as U}from"./misc-276e45ca.js";import{c as K}from"./config-component-props-c0788442.js";import{u as M}from"./use-merged-prop-ref-bd8415d7.js";import{u as O}from"./use-update-effect-311108d7.js";import{L as Q}from"./index-f59b2ddc.js";import{u as V}from"./index-ebeef9c4.js";import{b as W}from"./event-471798e4.js";import{g as X}from"./scroll-a0e7f6b9.js";import{g as $,i as Y}from"./style-696f78db.js";import"./index-fdd3a7d6.js";import"./use-theme-8dbf9539.js";import"./constants-a731eda5.js";import"./use-unmounted-ref-2a5aff7e.js";import"./use-merged-prop-78f8d6c6.js";import"./touch-helper-e91fac31.js";import"./use-controlled-state-e2423fe7.js";import"./use-creation-3d9fab3f.js";import"./index-8a37499c.js";import"./format-3509efe4.js";import"./detect-9e279ab2.js";import"./index-6ad4a01f.js";import"./use-on-popup-open-26f1d831.js";import"./raf-e95fb200.js";import"./react-a0edb2dd.js";import"./use-get-state-34a6027d.js";import"./index-f0ac2a00.js";const Z="fnx-list",y=F(Z),ee=K({status:"default",offset:50,direction:"down",slots:{},onLoad:J,immediateCheck:!0,scrollListenTo:null}),z=i.forwardRef((c,L)=>{const m=V("list"),[s,{className:T,children:b,...v}]=ee(c),{status:o,direction:d,slots:C}=s,n=M(s),u=i.useRef(null),l=i.useRef(),E=i.useRef(null),{active:x}=i.useContext(j.PanelContext),h=M(x),r=i.useCallback(()=>{const{status:a}=n.current;if(a!=="default")return;const f=u.current,S=l.current,g=E.current;if(!S||!g||!f||h.current===!1)return;const D=$(S);if(D.height<=0||Y(f))return;let w=!1;const A=$(g),{direction:H,offset:I}=n.current;H==="up"?w=D.top-A.top<=I:w=A.bottom-D.bottom<=I,w&&n.current.onLoad()},[n,h]),R=i.useMemo(()=>({element:u.current,scrollParent:l.current||null,check:r}),[r]);i.useImperativeHandle(L,()=>R,[R]),i.useEffect(()=>{const a=u.current;if(!a)return;const{scrollListenTo:f,immediateCheck:S}=n.current;typeof f=="function"?l.current=f():f&&(l.current=f);const g=l.current||X(a);return l.current=g,W(g,"scroll",r,{passive:!0}),S&&r(),()=>{g.removeEventListener("scroll",r)}},[r,n]),O(()=>{r()},[r,x,o]);const e=()=>{let a=C[o];if(o==="loading"&&a==null&&(a=t.jsx(Q,{size:16,text:m.loading})),a)return t.jsx("div",{className:y("indicator"),children:a})},P=t.jsx("div",{ref:E,className:y("placeholder")});return t.jsxs("div",{className:q(y([o]),T),role:"feed","aria-busy":o==="loading",...v,ref:u,children:[d==="down"?b:P,e(),d==="up"?b:P]})});z.displayName="List";const k=z,te={"zh-CN":{basicUsage:"基础用法",errorTip:"错误提示",errorText:"请求失败，点击重新加载",pullRefresh:"下拉刷新"},"en-US":{basicUsage:"Basic Usage",errorTip:"Error Info",errorText:"Request failed. Click to reload",pullRefresh:"Pull Refresh"}},B=c=>new Array(c).fill(0).map((L,m)=>{const s=m+1;return s<10?"0".concat(s):"".concat(s)});function Be(){const[c]=_(te,"en-US"),[L,m]=p("default"),[s,T]=p(),b=async(e=[])=>{m("loading"),await U(1e3),e=B(e.length+8),T(e),m(e.length>=24?"finished":"default")},[v,o]=p("default"),[d,C]=p(),n=async(e=[])=>{o("loading"),await U(1e3),e=B(e.length+8),C(e),e.length<=8?o("error"):o(e.length>=24?"finished":"default")},[u,l]=p("default"),[E,x]=p(!1),[h,r]=p(),R=async(e=[],P)=>{P&&(x(!0),u==="loading")||(l("loading"),e=B(P?8:e.length+8),await U(1e3),r(e),x(!1),l(e.length>=24?"finished":"default"))};return t.jsx(t.Fragment,{children:t.jsxs(j,{children:[t.jsx(j.Panel,{title:c.basicUsage,children:t.jsx(k,{status:L,onLoad:()=>{b(s)},children:(s||[]).map(e=>t.jsx(N,{title:e},e))})},"basicUsage"),t.jsx(j.Panel,{title:c.errorTip,children:t.jsx(k,{status:v,slots:{error:t.jsx("span",{onClick:()=>{n(d)},children:c.errorText})},onLoad:()=>{n(d)},children:(d||[]).map(e=>t.jsx(N,{title:e},e))})},"errorTip"),t.jsx(j.Panel,{title:c.pullRefresh,children:t.jsx(G,{refreshing:E,onRefresh:()=>R(h,!0),children:t.jsx(k,{status:u,onLoad:()=>R(h,!1),children:(h||[]).map(e=>t.jsx(N,{title:e},e))})})},"pullRefresh")]})})}export{Be as default};
