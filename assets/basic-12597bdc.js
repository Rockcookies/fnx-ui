import{r as i,j as t,b as z,c as q,a as _,F as G}from"./index-d9abb3b2.js";import{u as J}from"./use-demo-translate-111ff248.js";import{C as U}from"./index-9946c745.js";import{u as p}from"./use-safe-state-6c526362.js";import{P as K}from"./index-08529c43.js";import{T as L}from"./index-eba38395.js";import{n as O,s as y}from"./misc-276e45ca.js";import{c as Q}from"./config-component-props-c0788442.js";import{u as M}from"./use-merged-prop-ref-b6c7dc57.js";import{u as V}from"./use-update-effect-e4ebe9a3.js";import{L as W}from"./index-19e0971a.js";import{u as X}from"./index-2758f43a.js";import{b as Y}from"./event-471798e4.js";import{g as Z}from"./scroll-a0e7f6b9.js";import{g as $,i as ee}from"./style-696f78db.js";import"./index-23998fbd.js";import"./use-theme-abf2285a.js";import"./constants-905d732f.js";import"./use-unmounted-ref-25ab0d3b.js";import"./use-merged-prop-78f8d6c6.js";import"./touch-helper-e91fac31.js";import"./use-controlled-state-3e95143e.js";import"./use-creation-81fc62b8.js";import"./index-05ecef98.js";import"./format-73c0cb3b.js";import"./detect-9e279ab2.js";import"./index-d0e2941f.js";import"./use-on-popup-open-52f79c86.js";import"./raf-e95fb200.js";import"./react-cb438e7c.js";import"./use-get-state-80dac10e.js";import"./index-2da9f8c4.js";const te="fnx-list",k=_(te),re=Q({status:"default",offset:50,direction:"down",slots:{},onLoad:O,immediateCheck:!0,scrollListenTo:null}),F=i.forwardRef((c,S)=>{const m=X("list"),[s,{className:x,children:E,...C}]=re(c),{status:o,direction:d,slots:D}=s,n=M(s),u=i.useRef(null),l=i.useRef(),T=i.useRef(null),{active:R}=i.useContext(L.PanelContext),h=M(R),r=i.useCallback(()=>{const{status:a}=n.current;if(a!=="default")return;const f=u.current,v=l.current,g=T.current;if(!v||!g||!f||h.current===!1)return;const w=$(v);if(w.height<=0||ee(f))return;let N=!1;const A=$(g),{direction:H,offset:I}=n.current;H==="up"?N=w.top-A.top<=I:N=A.bottom-w.bottom<=I,N&&n.current.onLoad()},[n,h]),P=i.useMemo(()=>({element:u.current,scrollParent:l.current||null,check:r}),[r]);i.useImperativeHandle(S,()=>P,[P]),i.useEffect(()=>{const a=u.current;if(!a)return;const{scrollListenTo:f,immediateCheck:v}=n.current;typeof f=="function"?l.current=f():f&&(l.current=f);const g=l.current||Z(a);return l.current=g,Y(g,"scroll",r,{passive:!0}),v&&r(),()=>{g.removeEventListener("scroll",r)}},[r,n]),V(()=>{r()},[r,R,o]);const e=()=>{let a=D[o];if(o==="loading"&&a==null&&(a=t(W,{size:16,text:m.loading})),a)return t("div",{className:k("indicator"),children:a})},b=t("div",{ref:T,className:k("placeholder")});return z("div",{className:q(k([o]),x),role:"feed","aria-busy":o==="loading",...C,ref:u,children:[d==="down"?E:b,e(),d==="up"?E:b]})});F.displayName="List";const B=F,se={"zh-CN":{basicUsage:"基础用法",errorTip:"错误提示",errorText:"请求失败，点击重新加载",pullRefresh:"下拉刷新"},"en-US":{basicUsage:"Basic Usage",errorTip:"Error Info",errorText:"Request failed. Click to reload",pullRefresh:"Pull Refresh"}},j=c=>new Array(c).fill(0).map((S,m)=>{const s=m+1;return s<10?`0${s}`:`${s}`});function Ie(){const[c]=J(se,"en-US"),[S,m]=p("default"),[s,x]=p(),E=async(e=[])=>{m("loading"),await y(1e3),e=j(e.length+8),x(e),m(e.length>=24?"finished":"default")},[C,o]=p("default"),[d,D]=p(),n=async(e=[])=>{o("loading"),await y(1e3),e=j(e.length+8),D(e),e.length<=8?o("error"):o(e.length>=24?"finished":"default")},[u,l]=p("default"),[T,R]=p(!1),[h,r]=p(),P=async(e=[],b)=>{b&&(R(!0),u==="loading")||(l("loading"),e=j(b?8:e.length+8),await y(1e3),r(e),R(!1),l(e.length>=24?"finished":"default"))};return t(G,{children:z(L,{children:[t(L.Panel,{title:c.basicUsage,children:t(B,{status:S,onLoad:()=>{E(s)},children:(s||[]).map(e=>t(U,{title:e},e))})},"basicUsage"),t(L.Panel,{title:c.errorTip,children:t(B,{status:C,slots:{error:t("span",{onClick:()=>{n(d)},children:c.errorText})},onLoad:()=>{n(d)},children:(d||[]).map(e=>t(U,{title:e},e))})},"errorTip"),t(L.Panel,{title:c.pullRefresh,children:t(K,{refreshing:T,onRefresh:()=>P(h,!0),children:t(B,{status:u,onLoad:()=>P(h,!1),children:(h||[]).map(e=>t(U,{title:e},e))})})},"pullRefresh")]})})}export{Ie as default};
