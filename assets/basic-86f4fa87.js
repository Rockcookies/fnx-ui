import{r,j as e,c as E,a as W}from"./index-8b435b75.js";import{D as o}from"./index-588a6987.js";import{u as J}from"./use-demo-translate-489d42ac.js";import{I as b}from"./index-f0ac2a00.js";import{S as C}from"./index-6ad4a01f.js";import{u as K}from"./use-merged-prop-ref-bd8415d7.js";import{u as Q}from"./use-unmounted-ref-2a5aff7e.js";import{g as P}from"./style-696f78db.js";import{d as Y}from"./raf-e95fb200.js";import{c as Z}from"./config-component-props-c0788442.js";import{u as ee}from"./use-on-popup-open-26f1d831.js";import"./index-fdd3a7d6.js";import"./use-theme-8dbf9539.js";import"./format-3509efe4.js";import"./detect-9e279ab2.js";import"./event-471798e4.js";import"./misc-276e45ca.js";import"./touch-helper-e91fac31.js";import"./react-a0edb2dd.js";import"./use-safe-state-d07d3d84.js";import"./use-merged-prop-78f8d6c6.js";const te="fnx-notice-bar",a=W(te),re=Z({marquee:!1,marqueeDelay:1e3,marqueeSpeed:.06,ellipsis:!1,closeable:!1}),y=t=>{const n=t.current;n&&n.scrollTop},L=r.forwardRef((t,n)=>{const w=r.useRef(null),l=r.useRef(null),q=r.useRef(null),d=r.useRef(),[I,{leftIcon:N,rightIcon:S,closeIcon:$,color:A,background:O,className:V,style:z,children:F,...H}]=re(t),{marquee:c,ellipsis:M,closeable:X}=I,x=K(I),[T,h]=r.useState(),[k,j]=r.useState(),[s,u]=r.useState(),[v,_]=r.useState(!0),D=Q(),m=r.useCallback(()=>{h(void 0),j(void 0),u(void 0),!(c===!1||!v)&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{D.current||(u(c==="auto"?"first-reset-auto":"first-reset"),d.current=void 0)},Math.max(x.current.marqueeDelay,0)))},[c,v,x,D]);ee(()=>{Y(m)}),r.useEffect(()=>{m()},[m]),r.useImperativeHandle(n,()=>({element:q.current,reset:m}),[m]),r.useEffect(()=>{if(s==null)return;const{marqueeSpeed:B}=x.current,R=w.current?P(w.current).width:0,p=l.current?P(l.current).width:0;if(s==="first-reset"||s==="first-reset-auto"||s==="loop-reset"){y(l),u(s.replace("-reset","")),j(void 0),h(s==="loop-reset"?R:0);return}let g;if(s==="first"||s==="first-auto"&&p>R){const f=p/B;y(l),h(-p),j(f),g=setTimeout(()=>u("loop-reset"),f);return}if(s==="loop"){const f=(p+R)/B;y(l),h(-p),j(f),g=setTimeout(()=>u("loop-reset"),f)}return()=>{g&&clearTimeout(g)}},[s,x]);const G=()=>e.jsx("div",{ref:w,className:a(c?"marquee-wrapper":"content-wrapper"),children:e.jsx("div",{ref:l,style:{transform:T!=null?"translateX(".concat(T,"px)"):void 0,transitionDuration:k!=null?"".concat(k,"ms"):void 0},className:c?a("marquee"):E(a("content",{"wrap-text":!M}),M?"fnx-ellipsis":void 0),children:F})});return v?e.jsxs("div",{ref:q,...H,className:E(a({marquee:c}),V),style:{color:A,backgroundColor:O,...z},children:[N&&e.jsx("div",{className:a("left-icon"),children:N}),G(),X&&e.jsx("div",{className:a("close-icon"),onClick:()=>_(!1),children:$||e.jsx(b,{name:"cross"})}),S&&e.jsx("div",{className:a("right-icon"),children:S})]}):null});L.displayName="NoticeBar";const i=L;const U=W("demo-notice-bar"),se={"zh-CN":{text:"人生就像各种各样的巧克力，你永远不会知道那一块属于你",shortText:"生生不息，繁荣昌盛",basicUsage:"基础用法",marqueeMode:"滚动播放",ellipsis:"单行省略",wrap:"多行展示",rightIcon:"右侧图标",closeable:"可关闭",customStyle:"自定义样式",swipe:"垂直滚动"},"en-US":{text:"Life was like a box of chocolates, you never know what you’re gonna get.",shortText:"Live long and prosper",basicUsage:"Basic usage",marqueeMode:"Marquee Mode",ellipsis:"Ellipsis",wrap:"Wrap Mode",rightIcon:"Right Icon",closeable:"Closeable",customStyle:"Custom Style",swipe:"Vertical Scroll"}},oe=["In My Life","No Reply","Rock And Roll Music","Words of Love"];function Ne(){const[t]=J(se,"en-US");return e.jsxs(e.Fragment,{children:[e.jsx(o,{title:t.basicUsage,children:e.jsx(i,{marquee:!0,leftIcon:e.jsx(b,{name:"arrow-left"}),children:t.text})}),e.jsx(o,{title:t.marqueeMode,children:e.jsx(i,{marquee:!0,children:t.text})}),e.jsx(o,{title:t.ellipsis,children:e.jsx(i,{ellipsis:!0,children:t.text})}),e.jsx(o,{title:t.wrap,children:e.jsx(i,{children:t.text})}),e.jsx(o,{title:t.rightIcon,children:e.jsx(i,{ellipsis:!0,rightIcon:e.jsx(b,{name:"arrow-right"}),children:t.shortText})}),e.jsx(o,{title:t.closeable,children:e.jsx(i,{marquee:!0,closeable:!0,children:t.text})}),e.jsx(o,{title:t.customStyle,children:e.jsx(i,{marquee:!0,background:"var(--fnx-primary-color)",children:t.text})}),e.jsx(o,{title:t.swipe,children:e.jsx(i,{className:U("notice"),leftIcon:e.jsx(b,{name:"arrow-left"}),children:e.jsx(C,{autoplay:3e3,indicator:!1,vertical:!0,className:U("swipe"),children:oe.map(n=>e.jsx(C.Item,{children:n},n))})})})]})}export{Ne as default};
