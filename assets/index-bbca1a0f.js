import{r as e,a as A,j as $,c as D}from"./index-8b435b75.js";import{c as E}from"./config-component-props-c0788442.js";import{u as w}from"./use-controlled-state-e2423fe7.js";import{u as L}from"./use-merged-prop-78f8d6c6.js";import{u as T}from"./use-merged-prop-ref-bd8415d7.js";import{n as j}from"./misc-276e45ca.js";import{u as F}from"./use-checkbox-render-55b93ea6.js";const O=e.createContext({}),J="fnx-checkbox",K=A(J),Q=E({defaultChecked:!1,skipGroup:!1,iconShape:"square"}),y=e.forwardRef((b,R)=>{const[{defaultChecked:v,skipGroup:V,iconShape:G},{checked:k,value:n,onChange:P,...p}]=Q(b),d=e.useContext(O),h=T(d),u=V?void 0:d.value||void 0,C=u==null,S=e.useMemo(()=>u==null?k:n!=null?u.includes(n):k,[k,n,u]),{value:o,onChangeRef:x}=w({value:S,defaultValue:u!=null?!1:v,onChange:P}),m=e.useRef(null),a=e.useRef(null),l=L(!1,p.disabled,d.disabled);e.useEffect(()=>{if(C||n==null)return;const{cancelValue:t=j,registerValue:_=j}=h.current;return n!==a.current&&(a.current!=null&&t(a.current),_(n),a.current=n),()=>{a.current=null,t(n)}},[n,h,C]);const s=e.useCallback(()=>{if(l)return;const{toggleValue:t}=h.current;!C&&t&&n!=null?t(!o,n):x.current(!o)},[l,h,C,n,o,x]),c=e.useMemo(()=>({element:m.current,toggle:s}),[s]);return e.useImperativeHandle(R,()=>c,[c]),F({role:"checkbox",...p,iconShape:G,onClick:t=>{s(),p.onClick&&p.onClick(t)}},d)({bem:K,checked:o,ref:m})});y.displayName="Checkbox";const U=y,W="fnx-checkbox-group",X=A(W),Y=E({defaultValue:[]}),H=e.forwardRef((b,R)=>{const[{defaultValue:v},{value:V,onChange:G,disabled:k,direction:n,iconSize:P,iconPosition:p,iconShape:d,iconCheckedColor:h,labelDisabled:u,icon:C,checkedIcon:S,maxCheckedCount:o,className:x,children:m,...a}]=Y(b),{value:l,onChangeRef:s}=w({value:V,defaultValue:v,onChange:G}),c=e.useRef([]),I=e.useCallback(r=>{c.current=c.current.filter(i=>i!==r)},[]),t=e.useCallback(r=>{c.current.push(r)},[]),_=e.useCallback((r,i)=>{const f=[...l],g=f.indexOf(i);if(r&&o&&f.length>=o)return;r&&g===-1&&(o==null||f.length<o)&&f.push(i),r||f.splice(g,1);const z=f.filter(B=>c.current.indexOf(B)!==-1);s.current(z)},[o,s,l]),M=e.useRef(null),N=e.useMemo(()=>({element:M.current,toggleAll:r=>{let i=[...c.current];r&&r.checkAll||(i=[...c.current].filter(g=>l.indexOf(g)===-1)),s.current(i)}}),[s,l]);return e.useImperativeHandle(R,()=>N,[N]),$.jsx("div",{className:D(X({...n!=null?{[n]:n!=="vertical"}:{}}),x),...a,ref:M,children:$.jsx(O.Provider,{value:{value:l,disabled:k,direction:n,iconSize:P,iconPosition:p,iconShape:d,iconCheckedColor:h,labelDisabled:u,icon:C,checkedIcon:S,registerValue:t,cancelValue:I,toggleValue:_},children:m})})});H.displayName="CheckboxGroup";const Z=H,ee=Z,q=U;q.Group=ee;const ue=q;export{ue as C};
