import{j as d}from"./index-d6e0bb7d.js";import{c as m}from"./detect-9e279ab2.js";import{n as l}from"./misc-276e45ca.js";import{r as _}from"./react-af745673.js";var h=Object.defineProperty,v=(r,e,t)=>e in r?h(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);class P{constructor(){b(this,"_events",{})}on(e,t){(this._events[e]||(this._events[e]=[])).push(t)}off(e,t){this._events[e]&&this._events[e].splice(this._events[e].indexOf(t)>>>0,1)}emit(e,t){(this._events[e]||[]).slice().forEach(s=>{s(t)}),(this._events["*"]||[]).slice().forEach(s=>{s(e,t)})}}var E=Object.defineProperty,O=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e,t)=>(O(r,typeof e!="symbol"?e+"":e,t),t);class ${constructor(){w(this,"instances",[])}create(e,t){if(!m())return{update:l,clear:l};const s=new P;let a=!1;const i=document.createElement("div"),c=t||document.body;c.appendChild(i);const o={update:({visible:n,...u})=>{s.emit("update",u)},clear:()=>{a||(s.emit("update",{visible:!1}),this.instances=this.instances.filter(n=>n!==o),a=!0)}},f=e({container:i,onUpdate:n=>(s.on("update",n),()=>{s.off("update",n)}),remove:()=>{o.clear(),setTimeout(()=>{p(),c.removeChild(i)},0)}}),p=_(i,d(f,{}));return this.instances.push(o),o}clear(){this.instances.forEach(e=>{e.clear()})}}export{$ as P};
