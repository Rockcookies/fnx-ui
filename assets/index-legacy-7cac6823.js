!function(){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}var t=["dataNames","optionHeight","transitionDuration","visibleOptionsCount"],e=["optionHeight","visibleOptionsCount","toolbarPosition","toolbar","title","confirmButton","cancelButton","loading","onCancel","onConfirm","className","children"],r=["defaultValue","data","onChange","onConfirm","onCancel"],i=["defaultValue","data","onChange","onConfirm","onCancel"],o=["defaultValue","data","onChange","onConfirm","onCancel"];function a(n){return function(n){if(Array.isArray(n))return d(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||f(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function c(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?u(Object(e),!0).forEach((function(t){l(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=o.call(e)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(n){l=!0,i=n}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(n,t)||f(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(n,t){if(n){if("string"==typeof n)return d(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(n,t):void 0}}function d(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function v(n,t){if(null==n)return{};var e,r,i=function(n,t){if(null==n)return{};var e,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}System.register(["./index-legacy-1bd67aeb.js","./index-legacy-b8e40b71.js","./config-data-names-legacy-483ee0c6.js","./format-legacy-4dfc8f09.js","./use-creation-legacy-9d7fb02d.js","./use-merged-prop-ref-legacy-7929f994.js","./use-safe-state-legacy-aa82aec4.js","./use-update-effect-legacy-2c2f4b9d.js","./event-legacy-359ec6a3.js","./touch-helper-legacy-732fd97d.js","./misc-legacy-f59b2e17.js","./index-legacy-2d265d79.js","./index-legacy-184360dc.js","./constants-legacy-732fdcb2.js","./use-get-state-legacy-ade4366f.js"],(function(n,u){"use strict";var l,d,p,m,g,h,b,y,C,j,O,x,w,N,S,H,V,A,I,P;return{setters:[function(n){l=n.r,d=n.j,p=n.a,m=n.c},function(n){g=n.C},function(n){h=n.c},function(n){b=n.u,y=n.c},function(n){C=n.u},function(n){j=n.u},function(n){O=n.u},function(n){x=n.u},function(n){w=n.b,N=n.p},function(n){S=n.T},function(n){H=n.i},function(n){V=n.L},function(n){A=n.u},function(n){I=n.d},function(n){P=n.u}],execute:function(){var u=h({label:"label",value:"value",disabled:"disabled",children:"children"});function k(n){var e=n.dataNames,r=n.optionHeight,i=n.transitionDuration,o=n.visibleOptionsCount,a=v(n,t),c=l.useContext(g.Context),s=l.useMemo((function(){return b(r||44)}),[r]),f=u(e);return[{optionHeight:s,visibleOptionsCount:o||6,transitionDuration:i||c.transitionDuration,dataNames:f},a]}function D(n,t,e){for(var r=n=y(n,0,Math.max(t.length-1,0));r<t.length;r++)if(!e(t[r]))return r;for(var i=n-1;i>=0;i--)if(!e(t[i]))return i;return n}var E=p("fnx-picker-column"),M=function(n,t){return n*(t-1)/2},T=function(n,t){return D(n,t,(function(n){return n.disabled}))},R=l.forwardRef((function(n,t){var e=n.optionHeight,r=n.visibleOptionsCount,i=n.defaultValue,o=n.data,a=n.dataNames,u=l.useRef(n),c=l.useRef(null),v=l.useRef(null),p=C((function(n){var t,e=[],r=[],i=function(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=f(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return a=n.done,n},e:function(n){u=!0,o=n},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}(Array.isArray(o)?o:[]);try{for(i.s();!(t=i.n()).done;){var u=t.value;"string"==typeof u||"number"==typeof u?(e.push(u),r.push({value:u,disabled:!1})):(e.push(a.label(u)),r.push({value:a.value(u),disabled:!!a.disabled(u)}))}}catch(l){i.e(l)}finally{i.f()}if(!n)return[e,r];var c=s(n,2)[1];return H(c,r,(function(n,t){return n.value===t.value&&n.disabled===t.disabled}))?[e,c]:[e,r]}),[a,o]),m=s(p,2),g=m[0],h=m[1],b=s(O((function(){return T(h.findIndex((function(n){return n.value===i})),h)})),2),V=b[0],A=b[1],I=l.useMemo((function(){var n=h[V];if(n&&!n.disabled)return n.value}),[V,h]),P=j(I),k=s(O((function(){return-V*e})),2),D=k[0],R=k[1],L=j({data:o,options:h,activeIndex:V,wrapperOffset:D,optionHeight:e}),B=l.useCallback((function(n){return A(n),L.current.activeIndex=n,n}),[A,L]),z=l.useCallback((function(n){return R(n),L.current.wrapperOffset=n,n}),[R,L]),U=s(O(),2),Y=U[0],$=U[1],q=l.useCallback((function(){$(void 0),L.current.swipingTimer&&(clearTimeout(L.current.swipingTimer),L.current.swipingTimer=void 0)}),[$,L]),F=l.useMemo((function(){return M(e,r)}),[e,r]),G=l.useCallback((function(n,t){var e=t.animation,r=u.current.transitionDuration,i=L.current,o=i.optionHeight,a=i.options;q(),n=T(n,a),z(-n*o);var c=function(){q(),B(n)};e?($(r),L.current.swipingTimer=setTimeout(c,r)):c()}),[q,B,$,z,L]),J=l.useMemo((function(){return{element:c.current,getActiveValue:function(){return P.current},getActiveIndex:function(){return L.current.activeIndex},getActiveOption:function(){var n=L.current,t=n.activeIndex;return(n.data||[])[t]}}}),[P,L]);l.useImperativeHandle(t,(function(){return J}),[J]),l.useEffect((function(){var n=L.current.activeIndex,t=T(n,h);t!==n&&G(t,{animation:!1})}),[h,L,G]),x((function(){var n=u.current.onChange;if(null!=I&&n){var t=L.current.activeIndex;n(I,t)}}),[I,L]),l.useEffect((function(){var n=c.current;if(n){var t,e=0,r=0,i=0,o=0,a=function(n){(t=new S).start(n);var a=L.current,c=a.swipingTimer,l=a.optionHeight,s=a.wrapperOffset;if(c){var f=v.current?function(n){var t=window.getComputedStyle(n),e=t.transform||t.webkitTransform,r=e.slice(7,e.length-1).split(", ")[5];return Number(r)}(v.current):0,d=u.current.visibleOptionsCount;e=Math.min(0,f-M(l,d))}else e=s;q(),$(void 0),o=Date.now(),r=e,i=z(e)},l=function(n){if(t){t.move(n),N(n,!0);var a=L.current,u=a.optionHeight,c=a.options;i=z(y(e+t.touchData.deltaY,-c.length*u,u));var l=Date.now();l-o>300&&(o=l,r=i)}},s=function(){if(t){var n=i-r,e=Date.now()-o;if(e<300&&Math.abs(n)>15){var a=Math.abs(n/e);i+=a/.003*(n<0?-1:1)}var u=L.current,c=u.optionHeight,l=u.options,s=T(Math.round(-i/c),l);t=void 0,G(s,{animation:!0})}};return w(n,"touchstart",a,{passive:!0}),w(n,"touchmove",l,{passive:!1}),w(n,"touchend",s,{passive:!0}),w(n,"touchcancel",s,{passive:!0}),function(){n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",l),n.removeEventListener("touchend",s),n.removeEventListener("touchcancel",s)}}}),[c,L,q,z,G,$]);var K,Q;return d.jsx("div",{className:E(),ref:c,children:(K={height:"".concat(e,"px")},Q={transform:"translate3d(0, ".concat(D+F,"px, 0)")},null!=Y&&(Q.transitionDuration="".concat(Y,"ms")),d.jsx("ul",{className:E("wrapper"),style:Q,ref:v,children:h.map((function(n,t){var e=n.value,r=n.disabled,i=g[t];return d.jsx("li",{className:E("option",{selected:V===t,disabled:r}),tabIndex:0,role:"button",style:K,onClick:function(){return G(t,{animation:!0})},children:"string"==typeof i?d.jsx("div",{className:"fnx-ellipsis",children:i}):i},e)}))}))})}));R.displayName="PickerColumn";var L=R,B=p("fnx-picker"),z=l.forwardRef((function(n,t){var r=n.optionHeight,i=n.visibleOptionsCount,o=n.toolbarPosition,a=n.toolbar,u=n.title,s=n.confirmButton,f=n.cancelButton,p=n.loading,g=n.onCancel,h=n.onConfirm,b=n.className,y=n.children,C=v(n,e),j=A("picker"),O=l.useMemo((function(){return r*i}),[r,i]),x=function(){if(!1!==u)return l.isValidElement(u)?u:u&&d.jsx("div",{className:m(B("title"),"fnx-ellipsis"),children:u})},w=function(){if(!1!==f)return l.isValidElement(f)?f:d.jsx("button",{type:"button",className:B("cancel"),onClick:g,children:f||j.cancel})},N=function(){if(!1!==s)return l.isValidElement(s)?s:d.jsx("button",{type:"button",className:B("confirm"),onClick:h,children:s||j.confirm})},S=function(){if(!1!==a)return l.isValidElement(a)?a:d.jsxs("div",{className:B("toolbar"),children:[w(),x(),N()]})};return d.jsxs("div",c(c({className:m(B(),b)},C),{},{ref:t,children:["bottom"!==o&&S(),d.jsxs("div",{className:B("columns"),style:{height:"".concat(O,"px")},children:[y,d.jsx("div",{className:B("mask"),style:{backgroundSize:"100% ".concat((O-r)/2,"px")}}),d.jsx("div",{className:m(B("frame"),I),style:{height:"".concat(r,"px")}})]}),"bottom"===o&&S(),p&&d.jsx(V,{className:B("loading")})]}))}));z.displayName="PickerContainer";var U=z,Y=l.forwardRef((function(n,t){var e=s(k(n),2),i=e[0],o=i.optionHeight,a=i.visibleOptionsCount,u=i.transitionDuration,f=i.dataNames,p=e[1],m=p.defaultValue,g=p.data,h=p.onChange,b=p.onConfirm,y=p.onCancel,C=v(p,r),j=l.useRef(null),O=l.useRef(null),x=l.useMemo((function(){return{element:j.current,getValue:function(){var n;return null===(n=O.current)||void 0===n?void 0:n.getActiveValue()},getOption:function(){var n;return null===(n=O.current)||void 0===n?void 0:n.getActiveOption()}}}),[]);return l.useImperativeHandle(t,(function(){return x}),[x]),d.jsx(U,c(c({},C),{},{optionHeight:o,visibleOptionsCount:a,ref:j,onConfirm:function(){b&&b(x.getValue(),x.getOption())},onCancel:function(){y&&y()},children:d.jsx(L,{optionHeight:o,visibleOptionsCount:a,transitionDuration:u,defaultValue:m,data:g,dataNames:f,onChange:function(){h&&h(x.getValue(),x.getOption())},ref:O})}))}));Y.displayName="Picker";var $=Y,q=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:999999;return Math.floor(Math.random()*n)+1},F=function(n,t){for(var e=[],r=0;r<n.length;r++){var i=n[r],o=(t||[])[r][i];e.push(o)}return e},G=function(n,t,e){var r=n.map((function(n){return t.value(n)}));return e&&H(e,r)?e:r},J=function(n,t,e){for(var r=e||[],i=[],o=0,a=function(){var e=r[o],a=null!=e?n.findIndex((function(n){return t.value(n)===e})):0;a=D(a,n,(function(n){return!!t.disabled(n)})),i[o]=a,n=t.children(n[a])||[],o++};n&&n.length>0;)a();return i},K=function(n,t,e){for(var r=[],i=0;i<e.length;i++)if(n&&n.length){r.push(n);var o=e[i];n=n[o]&&t.children(n[o])||[]}else r.push([]);return r},Q=l.forwardRef((function(n,t){var e=s(k(n),2),r=e[0],o=r.optionHeight,u=r.visibleOptionsCount,f=r.transitionDuration,p=r.dataNames,m=e[1],g=m.defaultValue,h=m.data,b=m.onChange,y=m.onConfirm,C=m.onCancel,O=v(m,i),w=l.useRef(null),N=j(b),S=s(l.useState((function(){return J(h||[],p,g)})),2),H=S[0],V=S[1],A=s(l.useState((function(){return K(h||[],p,H).map((function(n){return[0,n]}))})),2),I=A[0],D=A[1],E=P((function(){return F(H,I.map((function(n){return s(n,2)[1]})))})),M=s(E,3),T=M[0],R=M[1],B=M[2],z=s(P((function(){return g||G(T,p)})),3),Y=z[0],$=z[1],Q=z[2];l.useImperativeHandle(t,(function(){return{element:w.current,getOptions:function(){return B()},getValue:function(){return Q()}}}),[B,Q]);return x((function(){var n=J(h||[],p,Q()),t=K(h||[],p,n),e=F(n,t);V(n),D((function(){var n=q();return t.map((function(t){return[n,t]}))})),R(e),$((function(n){return G(e,p,n)}))}),[h,p,$,Q]),x((function(){var n=N.current;n&&n(Y,B())}),[N,Y,B]),d.jsx(U,c(c({},O),{},{optionHeight:o,visibleOptionsCount:u,ref:w,onConfirm:function(){y&&y(Y,T)},onCancel:function(){C&&C()},children:I.map((function(n,t){var e=s(n,2),r=e[0],i=e[1];return d.jsx(L,{optionHeight:o,visibleOptionsCount:u,transitionDuration:f,defaultValue:Y[t],data:i,dataNames:p,onChange:function(n,e){return function(n,t,e){var r=n[t]&&p.children(n[t])||[],i=J(r,p),o=[].concat(a(H.slice(0,e)),[t],a(i)),u=q(),c=K(r,p,i).map((function(n){return[u,n]})),l=[].concat(a(I.slice(0,e+1)),a(c)),f=F(o,l.map((function(n){return s(n,2)[1]})));V(o),D(l),R(f),$((function(n){return G(f,p,n)}))}(i,e,t)}},"".concat(r,"-").concat(t))}))}))}));Q.displayName="PickerCascade";var W=Q,X=l.forwardRef((function(n,t){var e=s(k(n),2),r=e[0],i=r.optionHeight,a=r.visibleOptionsCount,u=r.transitionDuration,f=r.dataNames,p=e[1],m=p.defaultValue,g=p.data,h=p.onChange,b=p.onConfirm,y=p.onCancel,C=v(p,o),j=l.useRef(null),O=l.useRef({}),x=l.useMemo((function(){return Array.isArray(g)?g:[]}),[g]),w=l.useMemo((function(){function n(n){for(var t=[],e=0;e<x.length;e++){var r=O.current[e];r&&t.push(n(r))}return t}return{element:j.current,getValue:function(){return n((function(n){return n.getActiveValue()}))},getOptions:function(){return n((function(n){return n.getActiveOption()}))}}}),[x.length]);return l.useImperativeHandle(t,(function(){return w}),[w]),d.jsx(U,c(c({},C),{},{optionHeight:i,visibleOptionsCount:a,ref:j,onConfirm:function(){b&&b(w.getValue(),w.getOptions())},onCancel:function(){y&&y()},children:x.map((function(n,t){return d.jsx(L,{optionHeight:i,visibleOptionsCount:a,transitionDuration:u,defaultValue:m&&m[t],data:n,dataNames:f,onChange:function(){h&&h(w.getValue(),w.getOptions())},ref:function(n){O.current[t]=n}},t)}))}))}));X.displayName="PickerMulti";var Z=X,_=$;_.Multi=Z,_.Cascade=W;n("P",_)}}}))}();
