import{r as i,j as c,c as D,a as U}from"./index-8b435b75.js";import{b as k}from"./index-fdd3a7d6.js";import{u as E}from"./use-merged-prop-ref-bd8415d7.js";import{P as I}from"./popup-helper-5cd0647a.js";import{c as M}from"./config-component-props-c0788442.js";import{P as R}from"./index-8d4b6373.js";import{D as f}from"./index-588a6987.js";import{u as $}from"./use-demo-translate-489d42ac.js";import{C as A}from"./index-fdc7973b.js";import{I as B}from"./index-f0ac2a00.js";import{r as g}from"./misc-276e45ca.js";import"./use-theme-8dbf9539.js";import"./use-merged-prop-78f8d6c6.js";import"./detect-9e279ab2.js";import"./react-a0edb2dd.js";import"./use-on-popup-open-26f1d831.js";import"./event-471798e4.js";import"./scroll-a0e7f6b9.js";import"./touch-helper-e91fac31.js";import"./index-e8afc6c8.js";import"./use-controlled-state-e2423fe7.js";import"./use-update-effect-311108d7.js";import"./constants-a731eda5.js";import"./format-3509efe4.js";const H="fnx-notify",L=U(H),O=M({type:"danger",visible:!1,duration:2e3,lockScroll:!1,position:"top"}),w=i.forwardRef((o,t)=>{const[{type:s,visible:n,duration:a,lockScroll:e,position:r},{mountTo:u,message:d,color:l,background:p,children:b,className:P,style:T,...S}]=O(o),[j,y]=i.useState(!1);return i.useEffect(()=>{if(y(n),n&&a>0){const v=setTimeout(()=>{y(!1)},a);return()=>{clearTimeout(v)}}},[n,a]),c.jsx(R,{visible:j,mountTo:u,className:D(L([s]),P),renderOnShow:!0,destroyOnHide:!0,overlay:!1,lockScroll:e,position:r,style:{color:l,background:p,...T},...S,ref:t,children:d||b})});w.displayName="Notify";const h=w,N=new I;let x=!1;function W(o,t={}){return N.create(({onUpdate:s,remove:n})=>{const a=()=>{const[{onAfterHide:e,...r},u]=i.useState(o);return i.useEffect(()=>s(l=>{u(p=>({...p,...l}))}),[]),c.jsx(h,{visible:!0,...r,mountTo:!1,onAfterHide:()=>{n(),e&&e()}})};return a.displayName="NotifyStatic",a},t.container)}const m=h,C=(o,t)=>{const s=typeof o=="string"?{message:o}:o;return x||m.clearAll(),W(s,t)};m.show=o=>C(o);m.useNotify=()=>{const o=i.useContext(k),t=E(o);return i.useMemo(()=>{const s=()=>({container:t.current.mountTo()});return{show:n=>C(n,s())}},[t])};m.clearAll=()=>{N.clear()};m.allowMultiple=o=>{x=!!o};const z=m,F={"zh-CN":{basicUsage:"基础用法",primary:"主要通知",success:"成功通知",danger:"危险通知",warning:"警告通知",content:"通知内容",notifyType:"通知类型",customColor:"自定义颜色",customNotify:"自定义配置",customDuration:"自定义时长",customPosition:"自定义位置",countdownText:"倒计时 ${second} 秒"},"en-US":{basicUsage:"Basic Usage",primary:"Primary",success:"Success",danger:"Danger",warning:"Warning",content:"Notify Message",notifyType:"Notify Type",customColor:"Custom Color",customNotify:"Custom Notify",customDuration:"Custom Duration",customPosition:"Custom Position",countdownText:"Close in ${second}s"}};function yo(){const[o]=$(F,"en-US"),t=z.useNotify(),s=i.useRef(),n=i.useCallback(()=>{s.current!=null&&(clearInterval(s.current),s.current=void 0)},[]),a=()=>{let r=3;const u=t.show({duration:0,message:g(o.countdownText,{second:"".concat(r)})});s.current=setInterval(()=>{r--,r?u.update({message:g(o.countdownText,{second:"".concat(r)})}):(n(),u.clear())},1e3)};i.useEffect(()=>n,[n]);const e=(r,u)=>c.jsx(A,{title:r,clickable:!0,rightIcon:c.jsx(B,{name:"arrow-right"}),onClick:u});return c.jsxs(c.Fragment,{children:[c.jsx(f,{title:o.basicUsage,children:e(o.basicUsage,()=>t.show(o.content))}),c.jsxs(f,{title:o.notifyType,children:[e(o.primary,()=>t.show({message:o.content,type:"primary"})),e(o.success,()=>t.show({message:o.content,type:"success"})),e(o.danger,()=>t.show({message:o.content,type:"danger"})),e(o.warning,()=>t.show({message:o.content,type:"warning"}))]}),c.jsxs(f,{title:o.customNotify,children:[e(o.customColor,()=>t.show({message:o.content,color:"#ad0000",background:"#ffe1e1"})),e(o.customDuration,a),e(o.customPosition,()=>{t.show({message:o.content,type:"danger",position:"bottom"})})]})]})}export{yo as default};
