import{r as k,b as m,c as Y,j as o,a as T,F as q}from"./index-d6e0bb7d.js";import{D as z}from"./index-c851109a.js";import{u as H}from"./use-demo-translate-8fa6920a.js";import{B}from"./index-018453f2.js";import{g as J,c as W}from"./format-73c0cb3b.js";import{c as K}from"./config-component-props-c0788442.js";import"./index-442896ee.js";import"./use-theme-60a47b38.js";import"./index-9b422fb8.js";import"./detect-9e279ab2.js";import"./constants-905d732f.js";import"./event-471798e4.js";import"./misc-276e45ca.js";const Q="fnx-circle",$=T(Q);let U=0;const V=K({strokeWidth:5,progress:100,speed:1,strokeLinecap:"round",gapDegree:0,clockwise:!0});function L(t){return+t.replace("%","")}function M(t){return Array.isArray(t)?t:[t]}function E(t,e,r,c,i=0,d,h){const s=50-Number(r)/2;let a=0,p=-s,f=0,l=-2*s;switch(d){case"left":a=-s,p=0,f=2*s,l=0;break;case"right":a=s,p=0,f=-2*s,l=0;break;case"bottom":p=s,l=2*s;break}const S=h?1:0,P=`M 50,50 m ${a},${p}
   a ${s},${s} 0 1 ,${S} ${f},${-l}
   a ${s},${s} 0 1 ,${S} ${-f},${l}`,y=Math.PI*2*s,w={stroke:typeof c=="string"?c:void 0,strokeDasharray:`${e/100*(y-i)}px ${y}px`,strokeDashoffset:`-${i/2+t/100*(y-i)}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:P,pathStyle:w}}const Z=(t,e)=>{const r=t.map(()=>k.useRef(null)),c=k.useRef(null);return k.useEffect(()=>{const i=Date.now();let d=!1;Object.keys(r).forEach(h=>{const s=r[h].current;if(!s)return;d=!0;const a=s.style;a.transitionDuration=`${e*.3}s, ${e*.3}s, ${e*.3}s, ${e*.06}s`,c.current&&i-c.current<100&&(a.transitionDuration="0s, 0s")}),d&&(c.current=Date.now())}),[r]},F=k.forwardRef((t,e)=>{const[{strokeWidth:r,progress:c,speed:i,strokeLinecap:d,gapDegree:h,clockwise:s},{size:a,gapPosition:p,strokeColor:f,trailColor:l,className:S,style:P,children:y,...w}]=V(t),v=M(c),[G]=Z(v,i),C=M(f),{pathString:R,pathStyle:A}=E(0,100,r,l,h,p),x=C.find(n=>Object.prototype.toString.call(n)==="[object Object]"),D=k.useMemo(()=>(U+=1,`fnx-circle-linearGradient-${U}`),[]),I=()=>{let n=0;return v.map((u,N)=>{const j=C[N]||C[C.length-1],X=Object.prototype.toString.call(j)==="[object Object]"?`url(#${D})`:"#1989fa",O=E(n,u,r,j,h,p,s);return n+=u,o("path",{className:$("hover"),d:O.pathString,stroke:X,strokeLinecap:d,strokeWidth:r,opacity:u===0?0:1,fillOpacity:"0",style:O.pathStyle,ref:G[N]},N)})};return m("div",{className:Y($(),S),style:{...P,...J(a)},...w,ref:e,children:[m("svg",{viewBox:"0 0 100 100",children:[x&&o("defs",{children:o("linearGradient",{id:D,x1:"100%",y1:"0%",x2:"0%",y2:"0%",children:Object.keys(x).sort((n,u)=>L(n)-L(u)).map((n,u)=>o("stop",{offset:n,stopOpacity:1,stopColor:x[n]},u))})}),o("path",{className:$("trail"),d:R,stroke:l,strokeLinecap:d,strokeWidth:r,fillOpacity:"0",style:A}),I().reverse()]}),o("div",{className:$("text"),children:y})]})});F.displayName="Circle";const g=F;const b=T("demo-circle"),_={"zh-CN":{basicUsage:"基础用法",gradient:"渐变色",gapPosition:"仪表盘",customSize:"大小定制",customStyle:"样式定制",customColor:"颜色定制",customWidth:"宽度定制",counterClockwise:"逆时针",incr:"增加",decr:"减少"},"en-US":{basicUsage:"BasicUsage",gradient:"Gradient",gapPosition:"Dashboard",customSize:"Custom Size",customStyle:"Custom Style",customColor:"Custom Color",customWidth:"Custom Width",counterClockwise:"Counter Clockwise",incr:"Add",decr:"Decrease"}};function mt(){const[t]=H(_,"en-US"),[e,r]=k.useState(70),c=()=>{r(W(e+15,0,100))},i=()=>{r(W(e-15,0,100))};return m(q,{children:[o(z,{title:t.basicUsage,cardMode:!0,children:o("div",{className:b("block"),children:m(g,{progress:e,children:[e,"%"]})})}),m(z,{title:t.customStyle,children:[m("div",{className:b("block"),children:[o(g,{progress:e,strokeWidth:2,children:t.customWidth}),o(g,{progress:e,strokeColor:"var(--fnx-danger-color)",trailColor:"var(--fnx-gray-400)",children:t.customColor}),o(g,{progress:e,strokeColor:{"0%":"var(--fnx-danger-color)","100%":"var(--fnx-warning-color)"},children:t.gradient}),o(g,{progress:e,clockwise:!1,children:t.counterClockwise}),o(g,{progress:e,size:"120px",children:t.customSize})]}),m("div",{className:b("buttons"),children:[o(B,{className:b("button"),type:"primary",onClick:c,children:t.incr}),o(B,{className:b("button"),type:"danger",onClick:i,children:t.decr})]})]})]})}export{mt as default};
