!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["className","children"],r=["onChange","capture","accept","value","className","children"];function t(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(n,r,t){return(r=function(n){var r=function(n,r){if("object"!==e(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"===e(r)?r:String(r)}(r))in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function u(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;l=!1}else for(;!(l=(t=i.call(r)).done)&&(u.push(t.value),u.length!==n);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,n)||c(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,n){if(e){if("string"==typeof e)return s(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,n):void 0}}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}System.register(["./index-legacy-1bd67aeb.js","./config-component-props-legacy-b5279410.js","./use-controlled-state-legacy-c2785d55.js","./index-legacy-c68971b2.js","./index-legacy-184360dc.js","./detect-legacy-199d634d.js","./misc-legacy-f59b2e17.js","./index-legacy-d8f846ae.js"],(function(e,o){"use strict";var a,c,s,f,m,d,p,v,y,b,j;return{setters:[function(e){a=e.a,c=e.r,s=e.j,f=e.c},function(e){m=e.c},function(e){d=e.u},function(e){p=e.I},function(e){v=e.u},function(e){y=e.e},function(e){b=e.n},function(e){j=e.I}],execute:function(){var o=a("fnx-uploader"),h=+new Date,g=0;function w(){return"fn-upload-".concat(h,"-").concat(++g)}var x=m({file:{},onPreview:b,onBeforeRemove:function(){return!0},onRemove:b}),O=c.forwardRef((function(e,r){var t,a,c,m,d,v=l(x(e),2),b=v[0],h=b.file,g=b.onPreview,w=b.onBeforeRemove,O=b.onRemove,N=v[1],P=N.className,S=N.children,R=u(N,n),C=function(e){e.stopPropagation();var n=w(),r=function(e){!1!==e&&O()};y(n)?n.then(r):r(n)};return s.jsxs("div",i(i({className:f(o("preview"),P)},R),{},{ref:r,children:[(t=h.content,a=h.url,c=h.thumbnail,m=h.name,d=S&&s.jsx("div",{className:o("preview-cover"),children:S}),!1!==c?s.jsx(j,{fit:"cover",src:t||a,className:o("preview-image"),onClick:g,children:d}):s.jsxs("div",{className:o("file"),onClick:g,children:[s.jsx(p,{name:"file-o",className:o("file-icon")}),s.jsx("div",{className:o("file-name"),children:m}),d]})),function(){var e=h.status,n=h.message;if("uploading"===e||"failed"===e){var r="failed"===e?s.jsx(p,{name:"close-o",className:o("mask-icon")}):s.jsx(p.Spinner,{className:o("mask-icon-loading")});return s.jsxs("div",{className:o("mask"),children:[r,n&&s.jsx("div",{className:o("mask-message"),children:n})]})}}(),function(){var e=h.status;if(!1!==h.removable&&"uploading"!==e)return s.jsx("div",{role:"button",tabIndex:0,className:o("preview-remove"),onClick:C,children:s.jsx(p,{name:"cross",className:o("preview-remove-icon")})})}()]}))}));O.displayName="UploaderPreviewItem";var N=O,P=m({multiple:!1,disabled:!1,showFileList:!0,maxCount:Number.MAX_VALUE,defaultValue:[],onRead:function(e){return e},onUpload:b,onPreview:b,onRemove:function(){return!0},slots:{}}),S=function(e){return null!=e.uid?e:i(i({},e),{},{uid:w()})},R=c.forwardRef((function(e,n){var a=v("uploader"),m=c.useRef(null),b=c.useRef(null),j=l(P(e),2),h=j[0],g=h.multiple,x=h.disabled,O=h.showFileList,R=h.maxCount,C=h.defaultValue,A=h.onRead,I=h.onUpload,k=h.onPreview,U=h.onRemove,E=h.slots,L=j[1],D=L.onChange,$=L.capture,M=L.accept,T=L.value,V=L.className,B=L.children,F=u(L,r);c.useImperativeHandle(n,(function(){return{element:m.current,input:b.current}}));var H=c.useMemo((function(){return C.map((function(e){return S(e)}))}),[C]),W=c.useMemo((function(){return T?T.map((function(e){return S(e)})):void 0}),[T]),X=d({value:W,defaultValue:H,onChange:D}),_=X.value,q=X.onChangeRef,z=c.useCallback((function(){var e=b.current;e&&e.value&&(e.value="")}),[]),G=function(e){var n=R-_.length;e.length>n&&(e=e.slice(0,n)),Promise.all(e.map((function(e){return(n=e,r=n.file,t=n.content,null!=t?Promise.resolve(t||void 0):null==r||null==r.type||0!==r.type.indexOf("image/")?Promise.resolve(void 0):new Promise((function(e){var n=new FileReader;n.onload=function(n){e(n.target.result)},n.readAsDataURL(r)}))).catch((function(){}));var n,r,t}))).then((function(n){var r=e.map((function(e,r){return i(i({},e),{},{content:null!=e.content?e.content:n[r]})}));z(),I(r),q.current([].concat(t(_),t(r)))}))},J=function(e){if(!x){var n=t(e.target.files||[]).filter((function(e){return function(e,n){if(e&&n){var r=Array.isArray(n)?n:n.split(","),t=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return r.some((function(e){var n=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===n.charAt(0)){var r=t.toLowerCase(),a=n.toLowerCase(),u=[a];return".jpg"!==a&&".jpeg"!==a||(u=[".jpg","jpeg"]),u.some((function(e){return r.endsWith(e)}))}return/\/\*$/.test(n)?i===n.replace(/\/.*$/,""):o===n||!!/^\w+$/.test(n)}))}return!0}(e,M)})).map((function(e){return i(i({},e),{},{uid:w(),status:"uploading",file:e})}));if(!(n.length<=0)){var r=A(n);y(r)?r.then(G).catch(z):G(r)}}};return s.jsx("div",i(i({className:f(o({disabled:x}),V)},F),{},{ref:m,children:s.jsxs("div",{className:o("wrapper"),children:[function(){if(O)return E.fileList||_.map((function(e){return s.jsx(N,{file:e,onPreview:function(){return k(e)},onBeforeRemove:function(){return U(e)},onRemove:function(){return q.current(_.filter((function(n){return n.uid!==e.uid})))},children:E.filePreviewCover&&E.filePreviewCover(e)},e.uid)}))}(),function(){if(!(_.length>=R)){var e=s.jsx("input",{className:o("input"),ref:b,type:"file",capture:$,multiple:g,disabled:x,onChange:J});return B?s.jsxs("div",{className:o("input-wrapper"),children:[B,e]}):s.jsxs("div",{className:o("upload"),children:[s.jsx(p,{className:o("upload-icon"),name:"plus"}),s.jsx("span",{className:o("upload-text"),children:a.upload}),e]})}}()]})}))}));R.displayName="Uploader";var C=R;C.PreviewItem=N;e("U",C)}}}))}();
