import{r as i,j as m,c as k,a as I,b as f,F as M}from"./index-e0a0e62b.js";import{b as E}from"./index-3ef0d291.js";import{u as $}from"./use-merged-prop-ref-3afcd252.js";import{P as A}from"./popup-helper-0612a41c.js";import{c as R}from"./config-component-props-c0788442.js";import{P as B}from"./index-27506349.js";import{D as d}from"./index-321233ab.js";import{u as H}from"./use-demo-translate-cd584b24.js";import{C as L}from"./index-f26d845a.js";import{I as j}from"./index-328d196d.js";import{r as w}from"./misc-276e45ca.js";import"./use-theme-daaa26dc.js";import"./use-merged-prop-78f8d6c6.js";import"./detect-9e279ab2.js";import"./react-16bce17c.js";import"./use-on-popup-open-3848a53c.js";import"./event-471798e4.js";import"./scroll-a0e7f6b9.js";import"./touch-helper-e91fac31.js";import"./index-e30374a6.js";import"./CSSTransition-323ddcff.js";import"./use-controlled-state-c80e6a10.js";import"./use-update-effect-7c97adfc.js";import"./constants-905d732f.js";import"./format-73c0cb3b.js";const O="fnx-notify",F=I(O),W=R({type:"danger",visible:!1,duration:2e3,lockScroll:!1,position:"top"}),h=i.forwardRef((o,t)=>{const[{type:s,visible:n,duration:c,lockScroll:e,position:r},{mountTo:a,message:y,color:l,background:p,children:T,className:x,style:S,...v}]=W(o),[D,g]=i.useState(!1);return i.useEffect(()=>{if(g(n),n&&c>0){const U=setTimeout(()=>{g(!1)},c);return()=>{clearTimeout(U)}}},[n,c]),m(B,{visible:D,mountTo:a,className:k(F([s]),x),renderOnShow:!0,destroyOnHide:!0,overlay:!1,lockScroll:e,position:r,style:{color:l,background:p,...S},...v,ref:t,children:y||T})});h.displayName="Notify";const N=h,C=new A;let b=!1;function z(o,t={}){return C.create(({onUpdate:s,remove:n})=>{const c=()=>{const[{onAfterHide:e,...r},a]=i.useState(o);return i.useEffect(()=>s(l=>{a(p=>({...p,...l}))}),[]),m(N,{visible:!0,...r,mountTo:!1,onAfterHide:()=>{n(),e&&e()}})};return c.displayName="NotifyStatic",c},t.container)}const u=N,P=(o,t)=>{const s=typeof o=="string"?{message:o}:o;return b||u.clearAll(),z(s,t)};u.show=o=>P(o);u.useNotify=()=>{const o=i.useContext(E),t=$(o);return i.useMemo(()=>{const s=()=>({container:t.current.mountTo()});return{show:n=>P(n,s())}},[t])};u.clearAll=()=>{C.clear()};u.allowMultiple=o=>{b=!!o};const _=u,q={"zh-CN":{basicUsage:"基础用法",primary:"主要通知",success:"成功通知",danger:"危险通知",warning:"警告通知",content:"通知内容",notifyType:"通知类型",customColor:"自定义颜色",customNotify:"自定义配置",customDuration:"自定义时长",customPosition:"自定义位置",countdownText:"倒计时 ${second} 秒"},"en-US":{basicUsage:"Basic Usage",primary:"Primary",success:"Success",danger:"Danger",warning:"Warning",content:"Notify Message",notifyType:"Notify Type",customColor:"Custom Color",customNotify:"Custom Notify",customDuration:"Custom Duration",customPosition:"Custom Position",countdownText:"Close in ${second}s"}};function ho(){const[o]=H(q,"en-US"),t=_.useNotify(),s=i.useRef(),n=i.useCallback(()=>{s.current!=null&&(clearInterval(s.current),s.current=void 0)},[]),c=()=>{let r=3;const a=t.show({duration:0,message:w(o.countdownText,{second:`${r}`})});s.current=setInterval(()=>{r--,r?a.update({message:w(o.countdownText,{second:`${r}`})}):(n(),a.clear())},1e3)};i.useEffect(()=>n,[n]);const e=(r,a)=>m(L,{title:r,clickable:!0,rightIcon:m(j,{name:"arrow-right"}),onClick:a});return f(M,{children:[m(d,{title:o.basicUsage,children:e(o.basicUsage,()=>t.show(o.content))}),f(d,{title:o.notifyType,children:[e(o.primary,()=>t.show({message:o.content,type:"primary"})),e(o.success,()=>t.show({message:o.content,type:"success"})),e(o.danger,()=>t.show({message:o.content,type:"danger"})),e(o.warning,()=>t.show({message:o.content,type:"warning"}))]}),f(d,{title:o.customNotify,children:[e(o.customColor,()=>t.show({message:o.content,color:"#ad0000",background:"#ffe1e1"})),e(o.customDuration,c),e(o.customPosition,()=>{t.show({message:o.content,type:"danger",position:"bottom"})})]})]})}export{ho as default};
