import{j as d}from"./index-8b435b75.js";import{c as m}from"./detect-9e279ab2.js";import{n as l}from"./misc-276e45ca.js";import{r as _}from"./react-a0edb2dd.js";var h=Object.defineProperty,v=(r,e,t)=>e in r?h(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);class P{constructor(){b(this,"_events",{})}on(e,t){(this._events[e]||(this._events[e]=[])).push(t)}off(e,t){this._events[e]&&this._events[e].splice(this._events[e].indexOf(t)>>>0,1)}emit(e,t){(this._events[e]||[]).slice().forEach(s=>{s(t)}),(this._events["*"]||[]).slice().forEach(s=>{s(e,t)})}}var E=Object.defineProperty,x=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e,t)=>(x(r,typeof e!="symbol"?e+"":e,t),t);class ${constructor(){O(this,"instances",[])}create(e,t){if(!m())return{update:l,clear:l};const s=new P;let a=!1;const i=document.createElement("div"),c=t||document.body;c.appendChild(i);const o={update:({visible:n,...f})=>{s.emit("update",f)},clear:()=>{a||(s.emit("update",{visible:!1}),this.instances=this.instances.filter(n=>n!==o),a=!0)}},p=e({container:i,onUpdate:n=>(s.on("update",n),()=>{s.off("update",n)}),remove:()=>{o.clear(),setTimeout(()=>{u(),c.removeChild(i)},0)}}),u=_(i,d.jsx(p,{}));return this.instances.push(o),o}clear(){this.instances.forEach(e=>{e.clear()})}}export{$ as P};
