import{r,b as L,c as E,j as e,a as $,F as K}from"./index-cd4e7e60.js";import{D as s}from"./index-2d31b93e.js";import{u as Q}from"./use-demo-translate-12013308.js";import{I as x}from"./index-429bf8ad.js";import{S as P}from"./index-43a79cad.js";import{u as Y}from"./use-merged-prop-ref-cafd8c02.js";import{u as Z}from"./use-unmounted-ref-6de2b6b3.js";import{g as U}from"./style-696f78db.js";import{d as ee}from"./raf-e95fb200.js";import{c as te}from"./config-component-props-c0788442.js";import{u as re}from"./use-on-popup-open-9e47b768.js";import"./index-9b67d0d8.js";import"./use-theme-8af7e58d.js";import"./format-73c0cb3b.js";import"./detect-9e279ab2.js";import"./event-471798e4.js";import"./misc-276e45ca.js";import"./touch-helper-e91fac31.js";import"./react-45993995.js";import"./use-safe-state-d9c7269b.js";import"./use-merged-prop-78f8d6c6.js";const oe="fnx-notice-bar",a=$(oe),se=te({marquee:!1,marqueeDelay:1e3,marqueeSpeed:.06,ellipsis:!1,closeable:!1}),q=t=>{const n=t.current;n&&n.scrollTop},j=r.forwardRef((t,n)=>{const v=r.useRef(null),l=r.useRef(null),I=r.useRef(null),d=r.useRef(),[N,{leftIcon:S,rightIcon:M,closeIcon:A,color:O,background:F,className:V,style:z,children:H,...X}]=se(t),{marquee:c,ellipsis:T,closeable:_}=N,h=Y(N),[k,g]=r.useState(),[D,b]=r.useState(),[o,u]=r.useState(),[R,G]=r.useState(!0),B=Z(),m=r.useCallback(()=>{g(void 0),b(void 0),u(void 0),!(c===!1||!R)&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{B.current||(u(c==="auto"?"first-reset-auto":"first-reset"),d.current=void 0)},Math.max(h.current.marqueeDelay,0)))},[c,R,h,B]);re(()=>{ee(m)}),r.useEffect(()=>{m()},[m]),r.useImperativeHandle(n,()=>({element:I.current,reset:m}),[m]),r.useEffect(()=>{if(o==null)return;const{marqueeSpeed:C}=h.current,y=v.current?U(v.current).width:0,p=l.current?U(l.current).width:0;if(o==="first-reset"||o==="first-reset-auto"||o==="loop-reset"){q(l),u(o.replace("-reset","")),b(void 0),g(o==="loop-reset"?y:0);return}let w;if(o==="first"||o==="first-auto"&&p>y){const f=p/C;q(l),g(-p),b(f),w=setTimeout(()=>u("loop-reset"),f);return}if(o==="loop"){const f=(p+y)/C;q(l),g(-p),b(f),w=setTimeout(()=>u("loop-reset"),f)}return()=>{w&&clearTimeout(w)}},[o,h]);const J=()=>e("div",{ref:v,className:a(c?"marquee-wrapper":"content-wrapper"),children:e("div",{ref:l,style:{transform:k!=null?`translateX(${k}px)`:void 0,transitionDuration:D!=null?`${D}ms`:void 0},className:c?a("marquee"):E(a("content",{"wrap-text":!T}),T?"fnx-ellipsis":void 0),children:H})});return R?L("div",{ref:I,...X,className:E(a({marquee:c}),V),style:{color:O,backgroundColor:F,...z},children:[S&&e("div",{className:a("left-icon"),children:S}),J(),_&&e("div",{className:a("close-icon"),onClick:()=>G(!1),children:A||e(x,{name:"cross"})}),M&&e("div",{className:a("right-icon"),children:M})]}):null});j.displayName="NoticeBar";const i=j;const W=$("demo-notice-bar"),ie={"zh-CN":{text:"人生就像各种各样的巧克力，你永远不会知道那一块属于你",shortText:"生生不息，繁荣昌盛",basicUsage:"基础用法",marqueeMode:"滚动播放",ellipsis:"单行省略",wrap:"多行展示",rightIcon:"右侧图标",closeable:"可关闭",customStyle:"自定义样式",swipe:"垂直滚动"},"en-US":{text:"Life was like a box of chocolates, you never know what you’re gonna get.",shortText:"Live long and prosper",basicUsage:"Basic usage",marqueeMode:"Marquee Mode",ellipsis:"Ellipsis",wrap:"Wrap Mode",rightIcon:"Right Icon",closeable:"Closeable",customStyle:"Custom Style",swipe:"Vertical Scroll"}},ne=["In My Life","No Reply","Rock And Roll Music","Words of Love"];function Te(){const[t]=Q(ie,"en-US");return L(K,{children:[e(s,{title:t.basicUsage,children:e(i,{marquee:!0,leftIcon:e(x,{name:"arrow-left"}),children:t.text})}),e(s,{title:t.marqueeMode,children:e(i,{marquee:!0,children:t.text})}),e(s,{title:t.ellipsis,children:e(i,{ellipsis:!0,children:t.text})}),e(s,{title:t.wrap,children:e(i,{children:t.text})}),e(s,{title:t.rightIcon,children:e(i,{ellipsis:!0,rightIcon:e(x,{name:"arrow-right"}),children:t.shortText})}),e(s,{title:t.closeable,children:e(i,{marquee:!0,closeable:!0,children:t.text})}),e(s,{title:t.customStyle,children:e(i,{marquee:!0,background:"var(--fnx-primary-color)",children:t.text})}),e(s,{title:t.swipe,children:e(i,{className:W("notice"),leftIcon:e(x,{name:"arrow-left"}),children:e(P,{autoplay:3e3,indicator:!1,vertical:!0,className:W("swipe"),children:ne.map(n=>e(P.Item,{children:n},n))})})})]})}export{Te as default};
